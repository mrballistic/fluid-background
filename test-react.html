<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fluid Background React Test</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background: #000;
      color: white;
    }

    .container {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
    }

    .content {
      position: relative;
      z-index: 1;
      padding: 2rem;
      text-align: center;
      top: 50%;
      transform: translateY(-50%);
    }

    h1 {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    p {
      font-size: 1.2rem;
      opacity: 0.8;
    }

    canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
  </style>
</head>

<body>
  <div class="container">
    <div id="root"></div>
    <div class="content">
      <h1>Fluid Background React Test</h1>
      <p>Move your mouse to interact with the fluid simulation</p>
      <p>Check the console for any errors</p>
    </div>
  </div>

  <!-- React and ReactDOM from CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <script type="module">
    const { useState, useEffect, useRef } = React;
    const { createRoot } = ReactDOM;

    // Import our hooks (we'll need to build this properly)
    // For now, let's create a simple test component
    function FluidBackgroundTest() {
      const canvasRef = useRef(null);
      const [error, setError] = useState(null);
      const [initialized, setInitialized] = useState(false);

      useEffect(() => {
        const canvas = canvasRef.current;
        if (!canvas) return;

        try {
          // Set canvas size
          const rect = canvas.getBoundingClientRect();
          canvas.width = rect.width * (window.devicePixelRatio || 1);
          canvas.height = rect.height * (window.devicePixelRatio || 1);

          // Test WebGL context
          const gl = canvas.getContext('webgl2') || canvas.getContext('webgl');
          if (!gl) {
            throw new Error('WebGL not supported');
          }

          console.log('✅ WebGL context created successfully');
          console.log('WebGL version:', gl.getParameter(gl.VERSION));
          console.log('WebGL vendor:', gl.getParameter(gl.VENDOR));
          console.log('WebGL renderer:', gl.getParameter(gl.RENDERER));

          // Test framebuffer creation
          const framebuffer = gl.createFramebuffer();
          const texture = gl.createTexture();
          
          gl.bindTexture(gl.TEXTURE_2D, texture);
          gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, canvas.width, canvas.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

          gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);
          gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);

          const status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);
          if (status === gl.FRAMEBUFFER_COMPLETE) {
            console.log('✅ Framebuffer creation successful');
          } else {
            console.error('❌ Framebuffer incomplete:', status);
          }

          gl.bindFramebuffer(gl.FRAMEBUFFER, null);
          gl.deleteFramebuffer(framebuffer);
          gl.deleteTexture(texture);

          setInitialized(true);
        } catch (err) {
          console.error('❌ WebGL test failed:', err);
          setError(err.message);
        }
      }, []);

      return React.createElement('div', { style: { position: 'relative' } }, [
        React.createElement('canvas', {
          key: 'canvas',
          ref: canvasRef,
          style: {
            position: 'absolute',
            top: 0,
            left: 0,
            width: '100%',
            height: '100%',
            zIndex: -1
          }
        }),
        error && React.createElement('div', {
          key: 'error',
          style: {
            position: 'absolute',
            top: '10px',
            left: '10px',
            background: 'rgba(255, 0, 0, 0.8)',
            padding: '10px',
            borderRadius: '5px',
            zIndex: 1
          }
        }, `Error: ${error}`),
        initialized && React.createElement('div', {
          key: 'success',
          style: {
            position: 'absolute',
            top: '10px',
            right: '10px',
            background: 'rgba(0, 255, 0, 0.8)',
            padding: '10px',
            borderRadius: '5px',
            zIndex: 1,
            color: 'black'
          }
        }, 'WebGL initialized successfully!')
      ]);
    }

    // Render the component
    const root = createRoot(document.getElementById('root'));
    root.render(React.createElement(FluidBackgroundTest));
  </script>
</body>

</html>